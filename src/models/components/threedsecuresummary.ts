/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import * as z from "zod";

/**
 * The status of the 3DS challenge for this transaction.
 */
export enum ThreeDSecureSummaryStatus {
    SetupError = "setup_error",
    Error = "error",
    Declined = "declined",
    Cancelled = "cancelled",
    Complete = "complete",
}

/**
 * The method used for 3DS authentication for this transaction.
 */
export enum ThreeDSecureSummaryMethod {
    Challenge = "challenge",
    Frictionless = "frictionless",
}

/**
 * The error data received from our 3DS server. This will not be
 *
 * @remarks
 * populated if the customer failed the authentication with a
 * status code of `N`, `R`, or `U`.  To see full details about
 * the 3DS calls in those situations please use our transaction
 * events API.
 */
export type ThreeDSecureErrorData = {
    /**
     * The error description.
     */
    description: string | null;
    /**
     * Detail for the error.
     */
    detail: string | null;
    /**
     * The error code.
     */
    code: string | null;
    /**
     * Code indicating the 3-D Secure component that identified the error..
     */
    component: string | null;
};

/**
 * The transaction status after a the 3DS challenge. This will
 *
 * @remarks
 * be null in case of a frictionless 3DS flow.
 */
export enum ResponseDataAuthenticationResponse {
    Y = "Y",
    A = "A",
    N = "N",
    R = "R",
    U = "U",
}

/**
 * The transaction status received as part of the authentication request.
 */
export enum ResponseDataDirectoryResponse {
    C = "C",
    Y = "Y",
    A = "A",
    N = "N",
    R = "R",
    U = "U",
}

export type ThreeDSecureDataVersion2 = {
    /**
     * The cardholder authentication value or AAV.
     */
    cavv?: string | null | undefined;
    /**
     * The electronic commerce indicator for the 3DS transaction.
     */
    eci?: string | null | undefined;
    /**
     * The version of 3-D Secure that was used.
     */
    version?: string | undefined;
    /**
     * The transaction status after a the 3DS challenge. This will
     *
     * @remarks
     * be null in case of a frictionless 3DS flow.
     */
    authenticationResponse?: ResponseDataAuthenticationResponse | null | undefined;
    /**
     * The transaction status received as part of the authentication request.
     */
    directoryResponse?: ResponseDataDirectoryResponse | null | undefined;
    /**
     * The transaction identifier.
     */
    directoryTransactionId?: string | null | undefined;
    /**
     * The reason identifier for a declined transaction.
     */
    transactionReason?: string | null | undefined;
};

/**
 * The scheme/brand of the card that is used for 3-D Secure.
 */
export enum ResponseDataScheme {
    Accel = "accel",
    Amex = "amex",
    Bancontact = "bancontact",
    CarteBancaire = "carte-bancaire",
    Cirrus = "cirrus",
    Culiance = "culiance",
    Dankort = "dankort",
    DinersClub = "diners-club",
    Discover = "discover",
    EftposAustralia = "eftpos-australia",
    Elo = "elo",
    Hipercard = "hipercard",
    Jcb = "jcb",
    Maestro = "maestro",
    Mastercard = "mastercard",
    Mir = "mir",
    Nyce = "nyce",
    Other = "other",
    Pulse = "pulse",
    Rupay = "rupay",
    Star = "star",
    Uatp = "uatp",
    Unionpay = "unionpay",
    Visa = "visa",
}

export type ThreeDSecureDataVersion1 = {
    /**
     * The cardholder authentication value or AAV.
     */
    cavv: string;
    /**
     * The electronic commerce indicator for the 3DS transaction.
     */
    eci: string;
    /**
     * The version of 3-D Secure that was used.
     */
    version: string;
    /**
     * For 3-D Secure version 1, the enrolment response. For 3-D Secure version , the transaction status from the `ARes`.
     */
    directoryResponse: string;
    /**
     * The scheme/brand of the card that is used for 3-D Secure.
     */
    scheme?: ResponseDataScheme | null | undefined;
    /**
     * The response for the 3DS authentication call.
     */
    authenticationResponse: string;
    /**
     * The CAVV algorithm used.
     */
    cavvAlgorithm: string;
    /**
     * The transaction identifier.
     */
    xid: string;
};

/**
 * The 3DS data sent to the payment service for this transaction.
 *
 * @remarks
 *
 * This will only be populated if external 3DS data was passed in
 * directly as part of the transaction API call, or if our 3DS server
 * returned a status code of `Y` or `A`.
 *
 * In case of a failure to authenticate (status `N`, `R`, or `U`) this
 * field will not be populated. To see full details about the 3DS calls
 * please use our transaction events API.
 */
export type ResponseData = ThreeDSecureDataVersion2 | ThreeDSecureDataVersion1;

/**
 * The 3-D Secure data that was sent to the payment
 *
 * @remarks
 * service for the transaction.
 */
export type ThreeDSecureSummary = {
    /**
     * The version of 3DS used for this transaction.
     */
    version?: string | undefined;
    /**
     * The status of the 3DS challenge for this transaction.
     */
    status?: ThreeDSecureSummaryStatus | undefined;
    /**
     * The method used for 3DS authentication for this transaction.
     */
    method?: ThreeDSecureSummaryMethod | undefined;
    /**
     * The error data received from our 3DS server. This will not be
     *
     * @remarks
     * populated if the customer failed the authentication with a
     * status code of `N`, `R`, or `U`.  To see full details about
     * the 3DS calls in those situations please use our transaction
     * events API.
     */
    errorData?: ThreeDSecureErrorData | null | undefined;
    /**
     * The 3DS data sent to the payment service for this transaction.
     *
     * @remarks
     *
     * This will only be populated if external 3DS data was passed in
     * directly as part of the transaction API call, or if our 3DS server
     * returned a status code of `Y` or `A`.
     *
     * In case of a failure to authenticate (status `N`, `R`, or `U`) this
     * field will not be populated. To see full details about the 3DS calls
     * please use our transaction events API.
     */
    responseData?: ThreeDSecureDataVersion2 | ThreeDSecureDataVersion1 | null | undefined;
};

/** @internal */
export const ThreeDSecureSummaryStatus$: z.ZodNativeEnum<typeof ThreeDSecureSummaryStatus> =
    z.nativeEnum(ThreeDSecureSummaryStatus);

/** @internal */
export const ThreeDSecureSummaryMethod$: z.ZodNativeEnum<typeof ThreeDSecureSummaryMethod> =
    z.nativeEnum(ThreeDSecureSummaryMethod);

/** @internal */
export namespace ThreeDSecureErrorData$ {
    export type Inbound = {
        description: string | null;
        detail: string | null;
        code: string | null;
        component: string | null;
    };

    export const inboundSchema: z.ZodType<ThreeDSecureErrorData, z.ZodTypeDef, Inbound> = z
        .object({
            description: z.nullable(z.string()),
            detail: z.nullable(z.string()),
            code: z.nullable(z.string()),
            component: z.nullable(z.string()),
        })
        .transform((v) => {
            return {
                description: v.description,
                detail: v.detail,
                code: v.code,
                component: v.component,
            };
        });

    export type Outbound = {
        description: string | null;
        detail: string | null;
        code: string | null;
        component: string | null;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, ThreeDSecureErrorData> = z
        .object({
            description: z.nullable(z.string()),
            detail: z.nullable(z.string()),
            code: z.nullable(z.string()),
            component: z.nullable(z.string()),
        })
        .transform((v) => {
            return {
                description: v.description,
                detail: v.detail,
                code: v.code,
                component: v.component,
            };
        });
}

/** @internal */
export const ResponseDataAuthenticationResponse$: z.ZodNativeEnum<
    typeof ResponseDataAuthenticationResponse
> = z.nativeEnum(ResponseDataAuthenticationResponse);

/** @internal */
export const ResponseDataDirectoryResponse$: z.ZodNativeEnum<typeof ResponseDataDirectoryResponse> =
    z.nativeEnum(ResponseDataDirectoryResponse);

/** @internal */
export namespace ThreeDSecureDataVersion2$ {
    export type Inbound = {
        cavv?: string | null | undefined;
        eci?: string | null | undefined;
        version?: string | undefined;
        authentication_response?: ResponseDataAuthenticationResponse | null | undefined;
        directory_response?: ResponseDataDirectoryResponse | null | undefined;
        directory_transaction_id?: string | null | undefined;
        transaction_reason?: string | null | undefined;
    };

    export const inboundSchema: z.ZodType<ThreeDSecureDataVersion2, z.ZodTypeDef, Inbound> = z
        .object({
            cavv: z.nullable(z.string()).optional(),
            eci: z.nullable(z.string()).optional(),
            version: z.string().optional(),
            authentication_response: z.nullable(ResponseDataAuthenticationResponse$).optional(),
            directory_response: z.nullable(ResponseDataDirectoryResponse$).optional(),
            directory_transaction_id: z.nullable(z.string()).optional(),
            transaction_reason: z.nullable(z.string()).optional(),
        })
        .transform((v) => {
            return {
                ...(v.cavv === undefined ? null : { cavv: v.cavv }),
                ...(v.eci === undefined ? null : { eci: v.eci }),
                ...(v.version === undefined ? null : { version: v.version }),
                ...(v.authentication_response === undefined
                    ? null
                    : { authenticationResponse: v.authentication_response }),
                ...(v.directory_response === undefined
                    ? null
                    : { directoryResponse: v.directory_response }),
                ...(v.directory_transaction_id === undefined
                    ? null
                    : { directoryTransactionId: v.directory_transaction_id }),
                ...(v.transaction_reason === undefined
                    ? null
                    : { transactionReason: v.transaction_reason }),
            };
        });

    export type Outbound = {
        cavv?: string | null | undefined;
        eci?: string | null | undefined;
        version?: string | undefined;
        authentication_response?: ResponseDataAuthenticationResponse | null | undefined;
        directory_response?: ResponseDataDirectoryResponse | null | undefined;
        directory_transaction_id?: string | null | undefined;
        transaction_reason?: string | null | undefined;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, ThreeDSecureDataVersion2> = z
        .object({
            cavv: z.nullable(z.string()).optional(),
            eci: z.nullable(z.string()).optional(),
            version: z.string().optional(),
            authenticationResponse: z.nullable(ResponseDataAuthenticationResponse$).optional(),
            directoryResponse: z.nullable(ResponseDataDirectoryResponse$).optional(),
            directoryTransactionId: z.nullable(z.string()).optional(),
            transactionReason: z.nullable(z.string()).optional(),
        })
        .transform((v) => {
            return {
                ...(v.cavv === undefined ? null : { cavv: v.cavv }),
                ...(v.eci === undefined ? null : { eci: v.eci }),
                ...(v.version === undefined ? null : { version: v.version }),
                ...(v.authenticationResponse === undefined
                    ? null
                    : { authentication_response: v.authenticationResponse }),
                ...(v.directoryResponse === undefined
                    ? null
                    : { directory_response: v.directoryResponse }),
                ...(v.directoryTransactionId === undefined
                    ? null
                    : { directory_transaction_id: v.directoryTransactionId }),
                ...(v.transactionReason === undefined
                    ? null
                    : { transaction_reason: v.transactionReason }),
            };
        });
}

/** @internal */
export const ResponseDataScheme$: z.ZodNativeEnum<typeof ResponseDataScheme> =
    z.nativeEnum(ResponseDataScheme);

/** @internal */
export namespace ThreeDSecureDataVersion1$ {
    export type Inbound = {
        cavv: string;
        eci: string;
        version: string;
        directory_response: string;
        scheme?: ResponseDataScheme | null | undefined;
        authentication_response: string;
        cavv_algorithm: string;
        xid: string;
    };

    export const inboundSchema: z.ZodType<ThreeDSecureDataVersion1, z.ZodTypeDef, Inbound> = z
        .object({
            cavv: z.string(),
            eci: z.string(),
            version: z.string(),
            directory_response: z.string(),
            scheme: z.nullable(ResponseDataScheme$).optional(),
            authentication_response: z.string(),
            cavv_algorithm: z.string(),
            xid: z.string(),
        })
        .transform((v) => {
            return {
                cavv: v.cavv,
                eci: v.eci,
                version: v.version,
                directoryResponse: v.directory_response,
                ...(v.scheme === undefined ? null : { scheme: v.scheme }),
                authenticationResponse: v.authentication_response,
                cavvAlgorithm: v.cavv_algorithm,
                xid: v.xid,
            };
        });

    export type Outbound = {
        cavv: string;
        eci: string;
        version: string;
        directory_response: string;
        scheme?: ResponseDataScheme | null | undefined;
        authentication_response: string;
        cavv_algorithm: string;
        xid: string;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, ThreeDSecureDataVersion1> = z
        .object({
            cavv: z.string(),
            eci: z.string(),
            version: z.string(),
            directoryResponse: z.string(),
            scheme: z.nullable(ResponseDataScheme$).optional(),
            authenticationResponse: z.string(),
            cavvAlgorithm: z.string(),
            xid: z.string(),
        })
        .transform((v) => {
            return {
                cavv: v.cavv,
                eci: v.eci,
                version: v.version,
                directory_response: v.directoryResponse,
                ...(v.scheme === undefined ? null : { scheme: v.scheme }),
                authentication_response: v.authenticationResponse,
                cavv_algorithm: v.cavvAlgorithm,
                xid: v.xid,
            };
        });
}

/** @internal */
export namespace ResponseData$ {
    export type Inbound = ThreeDSecureDataVersion2$.Inbound | ThreeDSecureDataVersion1$.Inbound;

    export type Outbound = ThreeDSecureDataVersion2$.Outbound | ThreeDSecureDataVersion1$.Outbound;
    export const inboundSchema: z.ZodType<ResponseData, z.ZodTypeDef, Inbound> = z.union([
        z.lazy(() => ThreeDSecureDataVersion2$.inboundSchema),
        z.lazy(() => ThreeDSecureDataVersion1$.inboundSchema),
    ]);
    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, ResponseData> = z.union([
        z.lazy(() => ThreeDSecureDataVersion2$.outboundSchema),
        z.lazy(() => ThreeDSecureDataVersion1$.outboundSchema),
    ]);
}

/** @internal */
export namespace ThreeDSecureSummary$ {
    export type Inbound = {
        version?: string | undefined;
        status?: ThreeDSecureSummaryStatus | undefined;
        method?: ThreeDSecureSummaryMethod | undefined;
        error_data?: ThreeDSecureErrorData$.Inbound | null | undefined;
        response_data?:
            | ThreeDSecureDataVersion2$.Inbound
            | ThreeDSecureDataVersion1$.Inbound
            | null
            | undefined;
    };

    export const inboundSchema: z.ZodType<ThreeDSecureSummary, z.ZodTypeDef, Inbound> = z
        .object({
            version: z.string().optional(),
            status: ThreeDSecureSummaryStatus$.optional(),
            method: ThreeDSecureSummaryMethod$.optional(),
            error_data: z.nullable(z.lazy(() => ThreeDSecureErrorData$.inboundSchema)).optional(),
            response_data: z
                .nullable(
                    z.union([
                        z.lazy(() => ThreeDSecureDataVersion2$.inboundSchema),
                        z.lazy(() => ThreeDSecureDataVersion1$.inboundSchema),
                    ])
                )
                .optional(),
        })
        .transform((v) => {
            return {
                ...(v.version === undefined ? null : { version: v.version }),
                ...(v.status === undefined ? null : { status: v.status }),
                ...(v.method === undefined ? null : { method: v.method }),
                ...(v.error_data === undefined ? null : { errorData: v.error_data }),
                ...(v.response_data === undefined ? null : { responseData: v.response_data }),
            };
        });

    export type Outbound = {
        version?: string | undefined;
        status?: ThreeDSecureSummaryStatus | undefined;
        method?: ThreeDSecureSummaryMethod | undefined;
        error_data?: ThreeDSecureErrorData$.Outbound | null | undefined;
        response_data?:
            | ThreeDSecureDataVersion2$.Outbound
            | ThreeDSecureDataVersion1$.Outbound
            | null
            | undefined;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, ThreeDSecureSummary> = z
        .object({
            version: z.string().optional(),
            status: ThreeDSecureSummaryStatus$.optional(),
            method: ThreeDSecureSummaryMethod$.optional(),
            errorData: z.nullable(z.lazy(() => ThreeDSecureErrorData$.outboundSchema)).optional(),
            responseData: z
                .nullable(
                    z.union([
                        z.lazy(() => ThreeDSecureDataVersion2$.outboundSchema),
                        z.lazy(() => ThreeDSecureDataVersion1$.outboundSchema),
                    ])
                )
                .optional(),
        })
        .transform((v) => {
            return {
                ...(v.version === undefined ? null : { version: v.version }),
                ...(v.status === undefined ? null : { status: v.status }),
                ...(v.method === undefined ? null : { method: v.method }),
                ...(v.errorData === undefined ? null : { error_data: v.errorData }),
                ...(v.responseData === undefined ? null : { response_data: v.responseData }),
            };
        });
}
