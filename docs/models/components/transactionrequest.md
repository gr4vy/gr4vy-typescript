# TransactionRequest

A request to create a transaction.


## Fields

| Field                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Required                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Example                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `amount`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | *number*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_check_mark:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The monetary amount for this transaction, in the smallest<br/>currency unit for the given currency, for example `1299` cents to create<br/>an authorization for `$12.99`.<br/><br/>If the `intent` is set to `capture`, an amount greater than zero must<br/>be supplied.<br/><br/>All gift card amounts are subtracted from this amount before the<br/>remainder is charged to the provided `payment_method`.                                                                                                                                                                                                                                         | 1299                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `currency`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_check_mark:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | A supported ISO-4217 currency code.<br/><br/>For redirect requests, this value must match the one specified for<br/>`currency` in `payment_method`.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | USD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `paymentMethod`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | *components.TransactionRequestPaymentMethod*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The optional payment method to use for this transaction. This field is required if no `gift_cards` have been added.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `antiFraudFingerprint`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | This field represents the fingerprint data to be passed to the active<br/>anti-fraud service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | yGeBAFYgFmM=                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `asyncCapture`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Whether to capture the transaction asynchronously.<br/><br/>- When `async_capture` is `false` (default), the transaction is captured<br/>  in the same request.<br/>- When `async_capture` is `true`, the transaction is automatically<br/>  captured at a later time.<br/><br/>Redirect transactions are not affected by this flag.<br/><br/>This flag can only be set to `true` when `intent` is set to `capture`.                                                                                                                                                                                                                                   | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `browserInfo`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | [components.BrowserInfo](../../models/components/browserinfo.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Information about the browser used by the buyer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `buyerExternalIdentifier`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The `external_identifier` of the buyer to associate this payment method<br/>to. If this field is provided then the `buyer_id` field<br/>needs to be unset.<br/><br/>If a stored payment method or gift card is provided, then the buyer for<br/>that payment method needs to match the buyer for this field.                                                                                                                                                                                                                                                                                                                                           | user-789123                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `buyerId`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The ID of the buyer to associate this payment method to. If this field is<br/>provided then the `buyer_external_identifier` field needs to be unset.<br/><br/>If a stored payment method or gift card is provided, then the buyer for<br/>that payment method needs to match the buyer for this field.                                                                                                                                                                                                                                                                                                                                                 | fe26475d-ec3e-4884-9553-f7356683f7f9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `cartItems`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | [components.CartItem](../../models/components/cartitem.md)[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | An array of cart items that represents the line items of a transaction.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `connectionOptions`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | [components.ConnectionOptions](../../models/components/connectionoptions.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Allows for passing optional configuration per connection to take<br/>advantage of connection specific features. When provided, the data<br/>is only passed to the target connection type to prevent sharing<br/>configuration across connections.<br/><br/>Please note that each of the keys this object are in kebab-case, for<br/>example `cybersource-anti-fraud` as they represent the ID of the<br/>connector. All the other keys will be snake case, for example<br/>`merchant_defined_data` or camel case to match an external API that the<br/>connector uses.                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `country`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The 2-letter ISO code of the country of the transaction.<br/>This is used to filter the payment services that is used to process the<br/>transaction.<br/><br/>If this value is provided for redirect requests and it's not `null`, it<br/>must match the one specified for `country` in `payment_method`. Otherwise,<br/>the value specified for `country` in `payment_method` will be assumed<br/>implicitly.<br/>                                                                                                                                                                                                                                   | US                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `externalIdentifier`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | An external identifier that can be used to match the transaction against your own records.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | user-789123                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `giftCards`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | *components.TransactionRequestGiftCards*[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The optional gift card(s) to use for this transaction. At least one gift card is required if no other `payment_method` has been added.<br/>By default, only a maximum limit of 10 gift cards may be used in a single transaction. Please contact our team to change this limit.                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `intent`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [components.TransactionRequestIntent](../../models/components/transactionrequestintent.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Defines the intent of this API call. This determines the desired initial<br/>state of the transaction.<br/><br/>* `authorize` - (Default) Optionally approves and then authorizes a<br/>transaction but does not capture the funds.<br/>* `capture` - Optionally approves and then authorizes and captures the<br/>funds of the transaction.                                                                                                                                                                                                                                                                                                           | capture                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `isSubsequentPayment`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Indicates whether the transaction represents a subsequent payment<br/>coming from a setup recurring payment.<br/>Please note there are some restrictions on how this flag may be<br/>used.<br/><br/>The flag can only be `false` (or not set) when the transaction meets<br/>one of the following criteria:<br/><br/>* It is not `merchant_initiated`.<br/>* `payment_source` is set to `card_on_file`.<br/><br/>The flag can only be set to `true` when the transaction meets one of the<br/>following criteria:<br/><br/>* It is not `merchant_initiated`.<br/>* `payment_source` is set to `recurring` or `installment` and<br/>`merchant_initiated` is set to `true`.<br/>* `payment_source` is set to `card_on_file`. | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `merchantInitiated`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Indicates whether the transaction was initiated by the merchant (true)<br/>or customer (false).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `metadata`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Record<string, *string*>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Any additional information about the transaction that you would like to<br/>store as key-value pairs. This data is passed to payment service<br/>providers that support it.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | {<br/>"key": "value"<br/>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `paymentSource`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | [components.PaymentSource](../../models/components/paymentsource.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The source of the transaction. Defaults to `ecommerce`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | recurring                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `previousSchemeTransactionId`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | A scheme's transaction identifier to use in connecting a merchant<br/>initiated transaction to a previous customer initiated transaction.<br/><br/>If not provided, and a qualifying customer initiated transaction has been<br/>previously made, then Gr4vy will populate this value with the identifier<br/>returned for that transaction.<br/><br/>e.g. the Visa Transaction Identifier, or Mastercard Trace ID.                                                                                                                                                                                                                                    | 123456789012345                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `shippingDetailsId`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The unique identifier of a set of shipping details stored for the buyer.<br/><br/>If provided, the created transaction will include a copy of the details<br/>at the point of transaction creation; i.e. it will not be affected by<br/>later changes to the detail in the database.                                                                                                                                                                                                                                                                                                                                                                   | 47da6902-5eae-4b4b-88fd-856802d627d6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `statementDescriptor`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | [components.StatementDescriptor](../../models/components/statementdescriptor.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `store`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Whether or not to also try and store the payment method with us so that<br/>it can be used again for future use. This is only supported for payment<br/>methods that support this feature. There are also a few restrictions on<br/>how the flag may be set:<br/><br/>* The flag has to be set to `true` when the `payment_source` is set to<br/>`recurring` or `installment`, and `merchant_initiated` is set to `false`.<br/><br/>* The flag has to be set to `false` (or not set) when using a previously<br/>vaulted payment method.                                                                                                               | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `threeDSecureData`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | *components.ThreeDSecureData*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Pass through 3-D Secure data to support external 3-D Secure authorisation.<br/>If using an external 3-D Secure provider, you should not pass<br/>a `redirect_url` in the `payment_method` object for a transaction.                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `paymentServiceId`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | The unique identifier of an existing payment service. When<br/>provided, the created transaction will be processed by the given<br/>payment service and any routing rules will be skipped.                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 47da6902-5eae-4b4b-88fd-856802d627d6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |